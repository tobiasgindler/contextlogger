> This document contains documentation for the tracee context-logger-servlet module. Click [here](/README.md) to get an overview that TracEE is about.

# context-logger-servlet

> The TracEE context-logger-servlet project offers a Servlet Filter that outputs contextual data of a servlet request if an uncaught exception is detected by the filter. 

## Maven artifacts
You have to add the following Maven dependencies to your project:

    <dependency>
        <groupId>io.tracee</groupId>
        <artifactId>tracee-api</artifactId>
        <version>${tracee.version}</version>
    </dependency>
    
    <!-- tracee log framework provider - depending on your project log configuration -->
    <dependency>
        <groupId>io.tracee.backend</groupId>
        <artifactId>tracee-slf4j</artifactId>
        <version>${tracee.version}</version>
    </dependency>

    <dependency>
        <groupId>io.tracee.contextlogger</groupId>
        <artifactId>tracee-context-logger-servlet</artifactId>
        <version>${tracee.version}</version>
    </dependency>

## How to use
In servlet 3.0 environments you only have to add the maven dependencies. The Filter will be configured via a web fragment and will be applied to all servlet requests.
If you use older servlet environment prior to version 3.0 then you will have to add the following configurations to your web.xml manually:

    <filter>
		<filter-name>traceeErrorLoggingFilter</filter-name>
		<filter-class>io.tracee.contextlogger.servlet.TraceeErrorLoggingFilter</filter-class>
	</filter>

	<filter-mapping>
		<filter-name>traceeErrorLoggingFilter</filter-name>
		<url-pattern>/*</url-pattern>
	</filter-mapping>

Keep in mind that if you use another servlet filter that gracefully catches uncaught exceptions, then you have to ensure that the context logger filter is executed after that filter in the servlet filter chain.
Otherwise no output will be generated by the context logger servlet filter.

## Remarks
Please consider the usage of tracee tracee-servlet filter. It will help you to aggregate log entries by adding request and session ids to your loggers MDC.
